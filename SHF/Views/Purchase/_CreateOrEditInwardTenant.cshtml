@functions{

    public string AntiForgeryToken()
    {
        string cookieToken, formToken;
        AntiForgery.GetTokens(null, out cookieToken, out formToken);
        return cookieToken + ":" + formToken;
    }
}


<div class="modal-dialog modal-lg">
    <div class="modal-content">
        <form class="form-horizontal" name="myForm" novalidate>
            <!--myForm.$valid && -->
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">Inward Entry Details</h4>
            </div>
            <div class="modal-body">
                <!-- general form elements ng-if="errors.pageError" -->
                <span class="text-danger" ng-bind="errors.pageError"></span>
                <div id="errorMessages" class="text-danger" ng-if="ValidationSummary" ng-repeat="vs in ValidationSummary">{{vs}}</div>
                <div class="box box-primary">
                    <div class="box-body">
                        <input id="antiForgeryToken" data-ng-model="antiForgeryToken" type="hidden" data-ng-init="antiForgeryToken='@AntiForgeryToken()'" />
                        <div class="row">
                            <div class="col-md-6">
                                @*<div class="form-group pourchaseOrder-form-group" ng-class="{'has-error': (myForm.TenantName.$touched || myForm.TenantName.$dirty)  && myForm.TenantName.$invalid}">
                                    <label class="col-sm-4 control-label">Tenant</label>
                                    <div class="col-sm-8">
                                        @*<select name="TenantName" ng-model="InwardEntryCreateOrEditViewModel.InwardEntryHeader.Tenant_ID" class="pourchaseOrder-form-control form-control" style="width: 100%;" ng-options="x.ID as x.Name for x in AllTenants" ng-change="LoadVendors()" ng-disabled="true" required>
                                                <option value="" ng-selected="InwardEntryCreateOrEditViewModel.InwardEntryHeader.SelectedTenant_ID < 0">-- Select --</option>
                                            </select>* @
                                        <input type="text" class="pourchaseOrder-form-control form-control" name="TenantName" ng-model="InwardEntryCreateOrEditViewModel.InwardEntryHeader.Tenant.Name" ng-disabled="true" placeholder="Enter Tenant Name" tooltip-placement="top" uib-tooltip="Enter Tenant Name" required />
                                        <div class="help-block pourchaseOrder-help-block" ng-messages="myForm.TenantName.$error" ng-if="myForm.TenantName.$touched || myForm.TenantName.$dirty && myForm.TenantName.$invalid">
                                            <div ng-messages-include="~/ValidationMessages.html"></div>
                                        </div>
                                        <span class="text-danger" ng-show="errors.formErrors.InwardEntryCreateOrEditViewModel.InwardEntryHeader.Tenant_ID" ng-bind="errors.formErrors.InwardEntryCreateOrEditViewModel.InwardEntryHeader.Tenant_ID"></span>
                                    </div>
                                </div>*@
                                <div class="form-group pourchaseOrder-form-group" ng-class="{'has-error': (myForm.VendorName.$touched || myForm.VendorName.$dirty)  && myForm.VendorName.$invalid}">
                                    <label class="col-sm-4 control-label">Vendor</label>
                                    <div class="col-sm-8">
                                        @*<select name="VendorName" ng-model="InwardEntryCreateOrEditViewModel.InwardEntryHeader.Vendor_ID" class="pourchaseOrder-form-control form-control" style="width: 100%;" ng-options="x.ID as x.Name for x in AllVendors" ng-change="LoadPurchaseOrders()" ng-disabled="true" required>
                                                <option value="" ng-selected="InwardEntryCreateOrEditViewModel.InwardEntryHeader.SelectedVendor_ID < 0">-- Select --</option>
                                            </select>*@
                                        <input type="text" class="pourchaseOrder-form-control form-control" name="VendorName" ng-model="InwardEntryCreateOrEditViewModel.InwardEntryHeader.Vendor.Name" ng-disabled="true" placeholder="Enter Vendor Name" tooltip-placement="top" uib-tooltip="Enter Vendor Name" required />
                                        <div class="help-block pourchaseOrder-help-block" ng-messages="myForm.VendorName.$error" ng-if="myForm.VendorName.$touched || myForm.VendorName.$dirty && myForm.VendorName.$invalid">
                                            <div ng-messages-include="~/ValidationMessages.html"></div>
                                        </div>
                                        <span class="text-danger" ng-show="errors.formErrors.InwardEntryCreateOrEditViewModel.InwardEntryHeader.Vendor_ID" ng-bind="errors.formErrors.InwardEntryCreateOrEditViewModel.InwardEntryHeader.Vendor_ID"></span>
                                    </div>
                                </div>
                                <div class="form-group pourchaseOrder-form-group" ng-class="{'has-error': (myForm.VendorName.$touched || myForm.VendorName.$dirty)  && myForm.VendorName.$invalid}">
                                    <label class="col-sm-4 control-label">Purchase&nbsp;Order</label>
                                    <div class="col-sm-8">
                                        @*<select name="PurchaseOrder" ng-model="InwardEntryCreateOrEditViewModel.InwardEntryHeader.PurchaseOrder_ID" class="pourchaseOrder-form-control form-control" style="width: 100%;" ng-options="x.ID as x.Name for x in AllPurchaseOrders" ng-change="LoadPurchaseOrderDetails()" ng-disabled="true" required>
                                                <option value="" ng-selected="InwardEntryCreateOrEditViewModel.InwardEntryHeader.SelectedPurchaseOrder_ID < 0">-- Select --</option>
                                            </select>*@
                                        <input type="text" class="pourchaseOrder-form-control form-control" name="PurchaseOrder" ng-model="InwardEntryCreateOrEditViewModel.InwardEntryHeader.PurchaseOrder_ID" ng-disabled="true" placeholder="Enter Purchase Order" tooltip-placement="top" uib-tooltip="Enter Purchase Order" required />
                                        <div class="help-block pourchaseOrder-help-block" ng-messages="myForm.PurchaseOrder.$error" ng-if="myForm.PurchaseOrder.$touched || myForm.PurchaseOrder.$dirty && myForm.PurchaseOrder.$invalid">
                                            <div ng-messages-include="~/ValidationMessages.html"></div>
                                        </div>
                                        <span class="text-danger" ng-show="errors.formErrors.InwardEntryCreateOrEditViewModel.InwardEntryHeader.PurchaseOrder_ID" ng-bind="errors.formErrors.InwardEntryCreateOrEditViewModel.InwardEntryHeader.PurchaseOrder_ID"></span>
                                    </div>
                                </div>
                                <div class="form-group pourchaseOrder-form-group" ng-class="{'has-error': (myForm.InvoiceDate.$touched || myForm.InvoiceDate.$dirty)  && myForm.InvoiceDate.$invalid}">
                                    <label class="col-sm-4 control-label">Invoice&nbsp;Date</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="pourchaseOrder-form-control form-control pull-right" name="InvoiceDate" ng-Date="" dpFormat="mm/dd/yyyy" ng-model="InwardEntryCreateOrEditViewModel.InwardEntryHeader.InvoiceDate" ng-disabled="Processing" placeholder="Enter invoice date" tooltip-placement="top" uib-tooltip="Enter invoice date" required />
                                        <div class="help-block pourchaseOrder-help-block" ng-messages="myForm.InvoiceDate.$error" ng-if="myForm.InvoiceDate.$touched || myForm.InvoiceDate.$dirty && myForm.InvoiceDate.$invalid">
                                            <div ng-messages-include="~/ValidationMessages.html"></div>
                                        </div>
                                        <span class="text-danger" ng-show="errors.formErrors.InwardEntryCreateOrEditViewModel.InwardEntryHeader.InvoiceDate" ng-bind="errors.formErrors.InwardEntryCreateOrEditViewModel.InwardEntryHeader.InvoiceDate"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group pourchaseOrder-form-group" ng-class="{'has-error': (myForm.Invoice.$touched || myForm.Invoice.$dirty)  && myForm.Invoice.$invalid}">
                                    <label class="col-sm-4 control-label">Invoice&nbsp;No.</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="pourchaseOrder-form-control form-control" name="Invoice" ng-model="InwardEntryCreateOrEditViewModel.InwardEntryHeader.Invoice" ng-disabled="Processing" autocomplete="off" placeholder="Enter invoice or documnet number" tooltip-placement="top" uib-tooltip="Enter invoice or documnet number" required />
                                        <div class="help-block pourchaseOrder-help-block" ng-messages="myForm.Invoice.$error" ng-if="myForm.Invoice.$touched || myForm.Invoice.$dirty && myForm.Invoice.$invalid">
                                            <div ng-messages-include="~/ValidationMessages.html"></div>
                                        </div>
                                        <span class="text-danger" ng-show="errors.formErrors.InwardEntryCreateOrEditViewModel.InwardEntryHeader.Invoice" ng-bind="errors.formErrors.InwardEntryCreateOrEditViewModel.InwardEntryHeader.Invoice"></span>
                                    </div>
                                </div>
                                <div class="form-group pourchaseOrder-form-group" ng-class="{'has-error': (myForm.Challan.$touched || myForm.Challan.$dirty)  && myForm.Challan.$invalid}">
                                    <label class="col-sm-4 control-label">Challan&nbsp;No.</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="pourchaseOrder-form-control form-control" name="Challan" ng-model="InwardEntryCreateOrEditViewModel.InwardEntryHeader.Challan" ng-disabled="Processing" autocomplete="off" placeholder="Enter challan or delivery note number" tooltip-placement="top" uib-tooltip="Enter challan or delivery note number" required />
                                        <div class="help-block pourchaseOrder-help-block" ng-messages="myForm.Challan.$error" ng-if="myForm.Challan.$touched || myForm.Challan.$dirty && myForm.Challan.$invalid">
                                            <div ng-messages-include="~/ValidationMessages.html"></div>
                                        </div>
                                        <span class="text-danger" ng-show="errors.formErrors.InwardEntryCreateOrEditViewModel.InwardEntryHeader.Challan" ng-bind="errors.formErrors.InwardEntryCreateOrEditViewModel.InwardEntryHeader.Challan"></span>
                                    </div>
                                </div>
                                <div class="form-group pourchaseOrder-form-group" ng-class="{'has-error': (myForm.Vehicle.$touched || myForm.Vehicle.$dirty)  && myForm.Vehicle.$invalid}">
                                    <label class="col-sm-4 control-label">Vehicle&nbsp;No.</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="pourchaseOrder-form-control form-control" name="Vehicle" ng-model="InwardEntryCreateOrEditViewModel.InwardEntryHeader.Vehicle" ng-disabled="Processing" autocomplete="off" placeholder="Enter vehicle number" tooltip-placement="top" uib-tooltip="Enter vehicle number" required />
                                        <div class="help-block pourchaseOrder-help-block" ng-messages="myForm.Vehicle.$error" ng-if="myForm.Vehicle.$touched || myForm.Vehicle.$dirty && myForm.Vehicle.$invalid">
                                            <div ng-messages-include="~/ValidationMessages.html"></div>
                                        </div>
                                        <span class="text-danger" ng-show="errors.formErrors.InwardEntryCreateOrEditViewModel.InwardEntryHeader.Vehicle" ng-bind="errors.formErrors.InwardEntryCreateOrEditViewModel.InwardEntryHeader.Vehicle"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row" ng-show="InwardEntryCreateOrEditViewModel.InwardEntryHeader.PurchaseOrderData.length > 0">
                            <div class="col-md-12" style="overflow-x:auto;">
                                <table cellpadding="0" cellspacing="0" class="table table-striped table-responsive table-bordered table-condensed" style="margin-bottom: 1px !important;">
                                    <thead>
                                        @*<tr class=""><th>Product</th><th>Qty</th><th>Location</th><th>Batch</th><th>Status</th><th></th></tr>*@
                                        <tr class="ng-scope" ng-repeat="podata in InwardEntryCreateOrEditViewModel.InwardEntryHeader.PurchaseOrderData">
                                            <td colspan="8" ng-if="podata.Quantity > 0">
                                                <div style="overflow-x:auto;">
                                                    <table ng-show="1===1" cellpadding="0" cellspacing="0" class="table table-striped table-responsive table-bordered table-condensed" style="margin-bottom: 1px !important;">
                                                        <thead>
                                                            <tr>
                                                                <td style="width:10px !important;">
                                                                    <input type="hidden" ng-model="podata.PurchaseOrderDetails_ID" />
                                                                    <input type="hidden" ng-model="podata.Product_ID" />
                                                                    {{$index+1}}
                                                                </td>
                                                                <td tooltip-placement="bottom" uib-tooltip="Inward Product Name">{{podata.ProductName}}</td>
                                                                <td style="width:16px !important;" tooltip-placement="bottom" uib-tooltip="Inward Balance Quantity">{{podata.Quantity}}&nbsp;{{podata.UnitOfMeasurementName}}</td>
                                                                <td style="width:167px !important;"><input type="text" class="pourchaseOrder-form-control" ng-class="{'raise-error': podata.InwardEntryBody.length > 0 && !podata.LocationCode}" ng-model="podata.LocationCode" placeholder="Location Code" tooltip-placement="bottom" uib-tooltip="Enter Location Code"><text ng-if="podata.InwardEntryBody.length > 0 && !podata.LocationCode" class="text-danger">This field is required.</text></td>
                                                                <td style="width:167px !important;"><input type="text" class="pourchaseOrder-form-control" ng-model="podata.BatchCode" placeholder="Batch Code" tooltip-placement="bottom" uib-tooltip="Enter Batch Code"></td>
                                                                <td style="width:100px !important;">
                                                                    <select ng-model="podata.QualityValue" class="pourchaseOrder-form-control" ng-options="x.Value as x.Description for x in AllQualityStatuses" tooltip-placement="bottom" uib-tooltip="Select Product Status" required></select>
                                                                </td>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td colspan="6">
                                                                    <div class="input-group">
                                                                        <div class="input-group-addon">
                                                                            <i class="fa fa-barcode"></i>
                                                                        </div>
                                                                        <input class="pourchaseOrder-form-control form-control" style="width: 300px;" placeholder="Scan your barcode here..." type="text" id="txt_scan_barcode_{{podata.PurchaseOrderDetails_ID}}_{{podata.Product_ID}}" ng-keyup="KeyUpScanBarcodeAsync($event,InwardEntryCreateOrEditViewModel.InwardEntryHeader.PurchaseOrder_ID, podata.PurchaseOrderDetails_ID, podata.Product_ID, $index)" ng-model="podata.ScanedBarCode" tooltip-placement="top" uib-tooltip="Scan serial number of {{podata.ProductName}}">
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                        <tfoot ng-show="podata.InwardEntryBody.length > 0">
                                                            <tr ng-repeat="iwrdEntry in podata.InwardEntryBody" class="ng-scope">
                                                                <td> {{$index+1}}</td>
                                                                <td>{{iwrdEntry.ScanCode}}</td>
                                                                <td><span ng-click="RemoveItem($parent.$index, $index)" class="btn btn-danger btn-xs"><i title="Delete" class="fa fa-close"></i></span></td>
                                                            </tr>
                                                        </tfoot>
                                                    </table>
                                                </div>
                                            </td>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                    <tfoot></tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <input type="button" value="Save" ng-if="!Processing" class="btn btn-sm btn-success pull-left" ng-click="createOreditInwardAsyncForm()" ng-disabled="myForm.$invalid">
                <span ng-if="Processing" class="btn btn-sm btn-success pull-left">Processing...</span>
                @*<button type="reset" class="btn btn-sm btn-default pull-left" ng-click="Clear()">Clear</button>*@
                <span class="btn btn-sm btn-danger" ng-click="ShowConfirm('modal-createOredit')">Close</span>
            </div>
        </form>
    </div>
    <!-- /.modal-content -->
</div>

